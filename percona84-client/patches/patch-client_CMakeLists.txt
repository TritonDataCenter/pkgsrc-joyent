$NetBSD$

Split configuration between -client and -server.

--- client/CMakeLists.txt.orig	2025-05-27 16:31:11.000000000 +0000
+++ client/CMakeLists.txt
@@ -27,8 +27,11 @@ ADD_WSHADOW_WARNING()
 DISABLE_MISSING_PROFILE_WARNING()
 
 ## Subdirectory for mysql_migrate_keyring code.
+IF(WITHOUT_SERVER)
 ADD_SUBDIRECTORY(migrate_keyring)
+ENDIF()
 
+IF(WITHOUT_SERVER)
 MYSQL_ADD_EXECUTABLE(mysql
   ${CMAKE_SOURCE_DIR}/sql-common/net_ns.cc
   completion_hash.cc
@@ -59,6 +62,7 @@ MYSQL_ADD_EXECUTABLE(mysqltest
   ENABLE_EXPORTS
   LINK_LIBRARIES perconaserverclient
   )
+ENDIF()
 
 IF(MY_COMPILER_IS_GNU AND (WITH_LTO OR CMAKE_COMPILER_FLAG_WITH_LTO))
   TARGET_LINK_OPTIONS(mysqltest PRIVATE -Wno-error=stringop-overflow)
@@ -68,6 +72,7 @@ IF (WITH_COREDUMPER)
   TARGET_LINK_LIBRARIES(mysqltest coredumper)
 ENDIF()
 
+IF(WITHOUT_SERVER)
 MYSQL_ADD_EXECUTABLE(mysqlcheck
   check/mysqlcheck.cc
   check/mysqlcheck_core.cc
@@ -90,6 +95,7 @@ MYSQL_ADD_EXECUTABLE(mysqlshow
   multi_factor_passwordopt-vars.cc
   LINK_LIBRARIES perconaserverclient
   )
+ENDIF()
 
 OPTION(WITH_JSON_BINLOG_LIBRARY
   "Build and install standalone json_binlog library" OFF)
@@ -264,11 +270,13 @@ ELSE()
   LIST(APPEND MYSQLBINLOG_LIBRARIES json_binlog_static)
 ENDIF()
 
+IF(WITHOUT_SERVER)
 MYSQL_ADD_EXECUTABLE(mysqlbinlog
   ${MYSQLBINLOG_SOURCES}
   DEPENDENCIES GenError
   LINK_LIBRARIES ${MYSQLBINLOG_LIBRARIES}
   )
+ENDIF()
 
 # __builtin_strncpy specified bound depends on the length of the source argument
 # mysqlbinlog.cc:2169:22: note: length computed here
@@ -291,9 +299,12 @@ IF(WITH_JSON_BINLOG_LIBRARY)
   ENDIF()
 ENDIF()
 
+IF(WITHOUT_SERVER)
 TARGET_COMPILE_DEFINITIONS(mysqlbinlog PRIVATE DISABLE_PSI_MUTEX)
 TARGET_INCLUDE_DIRECTORIES(mysqlbinlog PRIVATE ${CMAKE_SOURCE_DIR}/sql)
+ENDIF()
 
+IF(WITHOUT_SERVER)
 MYSQL_ADD_EXECUTABLE(mysqladmin
   mysqladmin.cc
   multi_factor_passwordopt-vars.cc
@@ -312,6 +323,7 @@ MYSQL_ADD_EXECUTABLE(mysql_secure_instal
   mysql_secure_installation.cc
   LINK_LIBRARIES perconaserverclient
   )
+ENDIF()
 
 # "WIN32" also covers 64 bit. "echo" is used in some files below "mysql-test/".
 IF(WIN32)
